<!DOCTYPE html><html lang="zh-CN" class="no-js"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Env preset | Babel中文网</title><meta name="description" content="用于编写下一代 JavaScript 的编译器"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdn.bootcss.com/docsearch.js/2.4.1/docsearch.min.css"><link rel="stylesheet" href="/css/main.css?t=2017-11-26T05:44:25+00:00"><link rel="canonical" href="https://babeljs.cn/docs/plugins/preset-env/"><link rel="alternate" type="application/rss+xml" title="Babel" href="https://babeljs.cn/feed.xml" /><link rel="icon" href="/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="og:url" content="https://babeljs.cn"><meta name="og:image" content="website"><meta name="og:title" content="Env preset | Babel中文网"><meta name="og:description" content="用于编写下一代 JavaScript 的编译器"><meta name="og:image" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@babeljs"><meta name="twitter:title" content="Env preset | Babel中文网"><meta name="twitter:description" content="用于编写下一代 JavaScript 的编译器"><meta name="twitter:image:src" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:url" content="https://babeljs.cn/docs/plugins/preset-env/"> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?7d7e96af885ecd66a8c4ac73dc983681"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script></head><input type="checkbox" id="babel-toggle-search" class="babel-toggle-search-checkbox" /><header class="navbar navbar-default navbar-fixed-top babel-nav" id="top" role="banner"><div class="container"> <a href="/" class="navbar-brand logo">Babel</a><div class="babel-navbar-toggles"><div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#babel-navbar" aria-controls="babel-navbar" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">Open search</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label></div></div><nav id="babel-navbar" class="collapse navbar-collapse babel-navbar"><ul class="nav navbar-nav"><li > <a href="/learn-es2015/">学习 ES2015</a></li><li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">文档 <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li > <a href="/docs/setup/">配置</a></li><li > <a href="/docs/editors.html">编辑器</a></li><li > <a href="/docs/usage/caveats/">注意事项</a></li><li > <a href="/docs/community/videos/">视频</a></li><li class="group-name">相关依赖</li><li > <a href="/docs/core-packages/">babel-core</a></li><li > <a href="/docs/usage/polyfill/">babel-polyfill</a></li><li class="active"> <a href="/docs/plugins/">Plugins</a></li><li class="group-name">使用方式</li><li > <a href="/docs/usage/babelrc/">.babelrc</a></li><li > <a href="/docs/usage/cli/">babel-cli</a></li><li > <a href="/docs/usage/babel-register/">babel-register</a></li><li > <a href="/docs/usage/api/">API</a></li></ul></li><li > <a href="/repl/">试用</a></li><li > <a href="/blog/">Blog</a></li><li > <a href="/faq">常见问题</a></li><li > <a href="/team">团队</a></li><li class="dropdown "> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">友情链接 <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li > <a href="https://docschina.org/">印记中文</a></li><li > <a href="https://vuefe.cn/">Vue.js 中文</a></li><li > <a href="https://doc.react-china.org/">React.js 中文</a></li><li > <a href="https://rollupjs.org/zh">rollup.js 中文</a></li><li > <a href="http://nodejs.cn/">Node.js 中文</a></li><li > <a href="https://doc.webpack-china.org/">webpack 中文</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right nav-social"><li> <a href="https://opencollective.com/babel">赞助</a></li><li> <a href="https://discuss.babeljs.io">论坛</a></li><li> <a href="https://slack.babeljs.io/" title="Join us on Slack"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect x="219.27" y="221.3" width="72.04" height="69.58" transform="translate(-67.42 94.64) rotate(-18.52)"/><path d="M489.84,185.3C437,9.29,360.9-31.64,184.9,21.16S-32,150.1,20.76,326.1,149.7,543,325.7,490.24,542.64,361.3,489.84,185.3ZM401,299.5l-33.15,11.05,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18l-11.46-34.38-68.36,22.92,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18L198.81,367l-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18c-4.5-13.92,2.87-29.06,16.78-33.56L182,316.69l-22.1-65.9-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18C88.71,231.14,96.08,216,110,211.49l33.15-11.05-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78l11.46,34.38,68.36-22.92-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78L312.2,144l33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78s-2.87,29.06-16.78,33.56L329,194.3l22.1,65.9,33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78S414.93,295,401,299.5Z" transform="translate(0.7 0.3)"/></svg> </a></li><li> <a href="https://twitter.com/babeljs" title="Follow us on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 416.32"><title>twitter</title><path d="M160.83,464.16c193.2,0,298.92-160.22,298.92-298.92,0-4.51,0-9-.2-13.52A214,214,0,0,0,512,97.22a212.93,212.93,0,0,1-60.44,16.6,105.7,105.7,0,0,0,46.3-58.19A209,209,0,0,1,431.07,81a105.09,105.09,0,0,0-181.73,71.91,116.12,116.12,0,0,0,2.66,24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48,105.48,0,0,0,68,207.44a106.27,106.27,0,0,1-47.53-13.11v1.43a105.28,105.28,0,0,0,84.21,103.06,105.67,105.67,0,0,1-47.33,1.84,105.06,105.06,0,0,0,98.14,72.94A210.72,210.72,0,0,1,25,418.68a202.17,202.17,0,0,1-25-1.43,298.85,298.85,0,0,0,160.83,46.92" transform="translate(0 -47.84)" fill="#010101"/></svg> </a></li><li> <a href="https://github.com/babel/babel" title="Contribute on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36"><path d="M256,6.32c-141.36,0-256,114.61-256,256,0,113.09,73.34,209,175.08,242.9,12.8,2.35,17.47-5.56,17.47-12.34,0-6.08-.22-22.18-.35-43.54C121,464.83,106,415,106,415c-11.64-29.57-28.42-37.45-28.42-37.45C54.31,361.71,79.31,362,79.31,362c25.69,1.81,39.21,26.38,39.21,26.38,22.84,39.12,59.92,27.82,74.5,21.27,2.33-16.54,8.94-27.82,16.25-34.22C152.43,369,92.67,347,92.67,248.94c0-27.95,10-50.8,26.35-68.69-2.63-6.48-11.42-32.5,2.51-67.75,0,0,21.49-6.88,70.4,26.24a242.65,242.65,0,0,1,128.18,0c48.87-33.13,70.33-26.24,70.33-26.24,14,35.25,5.18,61.27,2.55,67.75,16.41,17.9,26.31,40.75,26.31,68.69,0,98.35-59.85,120-116.88,126.32,9.19,7.9,17.38,23.53,17.38,47.41,0,34.22-.31,61.83-.31,70.23,0,6.85,4.61,14.81,17.6,12.31C438.72,471.29,512,375.4,512,262.34,512,120.94,397.37,6.32,256,6.32Z" transform="translate(0 -6.32)" fill="#191717" fill-rule="evenodd"/></svg> </a></li></ul><label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">打开搜索</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label><div class="navbar-form navbar-right babel-search" role="search"><div class="input-group"> <label class="sr-only" aria-label="Search" for="babel-search-input">搜索</label><div class="babel-search-input-wrapper"> <input type="text" class="form-control" id="babel-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="在文档中搜索..."> <label for="babel-toggle-search" class="babel-toggle-search-close"> <span class="sr-only">关闭搜索</span> <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> </label></div></div></div></nav></div></header><div class="docs-header"><div class="container"><div class="row"><div class="col-md-12"><h1>Env preset</h1><p>Babel preset that automatically determines the Babel plugins you need based on your supported environments. Uses compat-table</p><p class="package-links"> <a href="https://github.com/babel/babel-preset-env">GitHub</a> &nbsp; · &nbsp; <a href="https://www.npmjs.com/package/babel-preset-env">npm</a> &nbsp; · &nbsp; <a href="https://github.com/babel/babel-preset-env/blob/master/README.md">编辑此页面</a></p></div></div></div></div><div class="container"><div class="row"><div class="col-md-9 docs-content"><div class="language-sh highlighter-rouge"><pre class="highlight"><code>npm install babel-preset-env --save-dev
</code></pre></div><p>Without any configuration options, babel-preset-env behaves exactly the same as babel-preset-latest (or babel-preset-es2015, babel-preset-es2016, and babel-preset-es2017 together).</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"env"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>You can also configure it to only include the polyfills and transforms needed for the browsers you support. Compiling only what’s needed can make your bundles smaller and your life easier.</p><p>This example only includes the polyfills and code transforms needed for the last two versions of each browser, and versions of Safari greater than or equal to 7. We use <a href="https://github.com/ai/browserslist">browserslist</a> to parse this information, so you can use <a href="https://github.com/ai/browserslist#queries">any valid query format supported by browserslist</a>.</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"browsers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"last 2 versions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"safari &gt;= 7"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Similarly, if you’re targeting Node.js instead of the browser, you can configure babel-preset-env to only include the polyfills and transforms necessary for a particular version:</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.10"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>For convenience, you can use <code class="highlighter-rouge">"node": "current"</code> to only include the necessary polyfills and transforms for the Node.js version that you use to run Babel:</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"current"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Check out the many options (especially <code class="highlighter-rouge">useBuiltIns</code> to polyfill less)!</p><ul><li><a href="#how-it-works">How it Works</a></li><li><a href="#install">Install</a></li><li><a href="#usage">Usage</a></li><li><a href="#options">Options</a></li><li><a href="#examples">Examples</a></li><li><a href="#caveats">Caveats</a></li><li><a href="#other-cool-projects">Other Cool Projects</a></li></ul><h2 id="how-it-works">How it Works</h2><h3 id="determine-environment-support-for-ecmascript-features">Determine environment support for ECMAScript features</h3><p>Use external data such as <a href="https://github.com/kangax/compat-table"><code class="highlighter-rouge">compat-table</code></a> to determine browser support. (We should create PRs there when necessary)</p><p><img src="https://cloud.githubusercontent.com/assets/588473/19214029/58deebce-8d48-11e6-9004-ee3fbcb75d8b.png" alt="" /></p><p>We can periodically run <a href="https://github.com/babel/babel-preset-env/blob/master/scripts/build-data.js">build-data.js</a> which generates <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugins.json">plugins.json</a>.</p><p>Ref: <a href="https://github.com/babel/babel-preset-env/issues/7">#7</a></p><h3 id="maintain-a-mapping-between-javascript-features-and-babel-plugins">Maintain a mapping between JavaScript features and Babel plugins</h3><blockquote><p>Currently located at <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js">plugin-features.js</a>.</p></blockquote><p>This should be straightforward to do in most cases. There might be cases where plugins should be split up more or certain plugins aren’t standalone enough (or impossible to do).</p><h3 id="support-all-plugins-in-babel-that-are-considered-latest">Support all plugins in Babel that are considered <code class="highlighter-rouge">latest</code></h3><blockquote><p>Default behavior without options is the same as <code class="highlighter-rouge">babel-preset-latest</code>.</p></blockquote><p>It won’t include <code class="highlighter-rouge">stage-x</code> plugins. env will support all plugins in what we consider the latest version of JavaScript (by matching what we do in <a href="http://babeljs.io/docs/plugins/preset-latest/"><code class="highlighter-rouge">babel-preset-latest</code></a>).</p><p>Ref: <a href="https://github.com/babel/babel-preset-env/issues/14">#14</a></p><h3 id="determine-the-lowest-common-denominator-of-plugins-to-be-included-in-the-preset">Determine the lowest common denominator of plugins to be included in the preset</h3><p>If you are targeting IE 8 and Chrome 55 it will include all plugins required by IE 8 since you would need to support both still.</p><h3 id="support-a-target-option-node-current-to-compile-for-the-currently-running-node-version">Support a target option <code class="highlighter-rouge">"node": "current"</code> to compile for the currently running node version.</h3><p>For example, if you are building on Node 6, arrow functions won’t be converted, but they will if you build on Node 0.12.</p><h3 id="support-a-browsers-option-like-autoprefixer">Support a <code class="highlighter-rouge">browsers</code> option like autoprefixer</h3><p>Use <a href="https://github.com/ai/browserslist">browserslist</a> to declare supported environments by performing queries like <code class="highlighter-rouge">&gt; 1%, last 2 versions</code>.</p><p>Ref: <a href="https://github.com/babel/babel-preset-env/pull/19">#19</a></p><h2 id="install">Install</h2><p>With <a href="https://www.npmjs.com">npm</a>:</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>npm install --save-dev babel-preset-env
</code></pre></div><p>Or <a href="https://yarnpkg.com">yarn</a>:</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>yarn add babel-preset-env --dev
</code></pre></div><h2 id="usage">Usage</h2><p>The default behavior without options runs all transforms (behaves the same as <a href="https://babeljs.io/docs/plugins/preset-latest/">babel-preset-latest</a>).</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"env"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="options">Options</h2><p>For more information on setting options for a preset, refer to the <a href="http://babeljs.io/docs/plugins/#plugin-preset-options">plugin/preset options</a> documentation.</p><h3 id="targets"><code class="highlighter-rouge">targets</code></h3><p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">[string]:</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">string</span><span class="w"> </span><span class="p">}</span></code>, defaults to <code class="highlighter-rouge"><span class="p">{}</span></code>.</p><p>Takes an object of environment versions to support.</p><p>Each target environment takes a number or a string (we recommend using a string when specifying minor versions like <code class="highlighter-rouge">node: "6.10"</code>).</p><p>Example environments: <code class="highlighter-rouge">chrome</code>, <code class="highlighter-rouge">opera</code>, <code class="highlighter-rouge">edge</code>, <code class="highlighter-rouge">firefox</code>, <code class="highlighter-rouge">safari</code>, <code class="highlighter-rouge">ie</code>, <code class="highlighter-rouge">ios</code>, <code class="highlighter-rouge">android</code>, <code class="highlighter-rouge">node</code>, <code class="highlighter-rouge">electron</code>.</p><p>The <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugins.json">data</a> for this is generated by running the <a href="https://github.com/babel/babel-preset-env/blob/master/scripts/build-data.js">build-data script</a> which pulls in data from <a href="https://kangax.github.io/compat-table">compat-table</a>.</p><h3 id="targetsnode"><code class="highlighter-rouge">targets.node</code></h3><p><code class="highlighter-rouge">number | string | "current" | true</code></p><p>If you want to compile against the current node version, you can specify <code class="highlighter-rouge">"node": true</code> or <code class="highlighter-rouge">"node": "current"</code>, which would be the same as <code class="highlighter-rouge">"node": process.versions.node</code>.</p><h3 id="targetsbrowsers"><code class="highlighter-rouge">targets.browsers</code></h3><p><code class="highlighter-rouge">Array&lt;string&gt; | string</code></p><p>A query to select browsers (ex: last 2 versions, &gt; 5%) using <a href="https://github.com/ai/browserslist">browserslist</a>.</p><p>Note, browsers’ results are overridden by explicit items from <code class="highlighter-rouge">targets</code>.</p><h3 id="targetsuglify"><code class="highlighter-rouge">targets.uglify</code></h3><p><code class="highlighter-rouge">true</code></p><p>When using <code class="highlighter-rouge">uglify-js</code> to minify your code, you may run into syntax errors when targeting later browsers since <code class="highlighter-rouge">uglify-js</code> does not support any ES2015+ syntax.</p><p>To prevent these errors - set the <code class="highlighter-rouge">uglify</code> option to <code class="highlighter-rouge">true</code>, which enables all transformation plugins and as a result, your code is fully compiled to ES5. However, the <code class="highlighter-rouge">useBuiltIns</code> option will still work as before and only include the polyfills that your target(s) need.</p><blockquote><p>Uglify has support for ES2015 syntax via <a href="https://github.com/mishoo/UglifyJS2/tree/harmony">uglify-es</a>. If you are using syntax unsupported by <code class="highlighter-rouge">uglify-es</code>, we recommend using <a href="https://github.com/babel/minify">babel-minify</a>.</p></blockquote><blockquote><p>Note: This option is deprecated in 2.x and replaced with a <a href="https://github.com/babel/babel-preset-env/pull/264"><code class="highlighter-rouge">forceAllTransforms</code> option</a>.</p></blockquote><h3 id="spec"><code class="highlighter-rouge">spec</code></h3><p><code class="highlighter-rouge">boolean</code>, defaults to <code class="highlighter-rouge">false</code>.</p><p>Enable more spec compliant, but potentially slower, transformations for any plugins in this preset that support them.</p><h3 id="loose"><code class="highlighter-rouge">loose</code></h3><p><code class="highlighter-rouge">boolean</code>, defaults to <code class="highlighter-rouge">false</code>.</p><p>Enable “loose” transformations for any plugins in this preset that allow them.</p><h3 id="modules"><code class="highlighter-rouge">modules</code></h3><p><code class="highlighter-rouge">"amd" | "umd" | "systemjs" | "commonjs" | false</code>, defaults to <code class="highlighter-rouge">"commonjs"</code>.</p><p>Enable transformation of ES6 module syntax to another module type.</p><p>Setting this to <code class="highlighter-rouge">false</code> will not transform modules.</p><h3 id="debug"><code class="highlighter-rouge">debug</code></h3><p><code class="highlighter-rouge">boolean</code>, defaults to <code class="highlighter-rouge">false</code>.</p><p>Outputs the targets/plugins used and the version specified in <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugins.json">plugin data version</a> to <code class="highlighter-rouge">console.log</code>.</p><h3 id="include"><code class="highlighter-rouge">include</code></h3><p><code class="highlighter-rouge">Array&lt;string&gt;</code>, defaults to <code class="highlighter-rouge">[]</code>.</p><blockquote><p>NOTE: <code class="highlighter-rouge">whitelist</code> is deprecated and will be removed in the next major in favor of this.</p></blockquote><p>An array of plugins to always include.</p><p>Valid options include any:</p><ul><li><p><a href="https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js">Babel plugins</a> - both with (<code class="highlighter-rouge">babel-plugin-transform-es2015-spread</code>) and without prefix (<code class="highlighter-rouge">transform-es2015-spread</code>) are supported.</p></li><li><p><a href="https://github.com/babel/babel-preset-env/blob/master/data/built-in-features.js">Built-ins</a>, such as <code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">set</code>, or <code class="highlighter-rouge">object.assign</code>.</p></li></ul><p>This option is useful if there is a bug in a native implementation, or a combination of a non-supported feature + a supported one doesn’t work.</p><p>For example, Node 4 supports native classes but not spread. If <code class="highlighter-rouge">super</code> is used with a spread argument, then the <code class="highlighter-rouge">transform-es2015-classes</code> transform needs to be <code class="highlighter-rouge">include</code>d, as it is not possible to transpile a spread with <code class="highlighter-rouge">super</code> otherwise.</p><blockquote><p>NOTE: The <code class="highlighter-rouge">include</code> and <code class="highlighter-rouge">exclude</code> options <em>only</em> work with the <a href="https://github.com/babel/babel-preset-env/blob/master/data/plugin-features.js">plugins included with this preset</a>; so, for example, including <code class="highlighter-rouge">transform-do-expressions</code> or excluding <code class="highlighter-rouge">transform-function-bind</code> will throw errors. To use a plugin <em>not</em> included with this preset, add them to your <a href="https://babeljs.io/docs/usage/babelrc/">config</a> directly.</p></blockquote><h3 id="exclude"><code class="highlighter-rouge">exclude</code></h3><p><code class="highlighter-rouge">Array&lt;string&gt;</code>, defaults to <code class="highlighter-rouge">[]</code>.</p><p>An array of plugins to always exclude/remove.</p><p>The possible options are the same as the <code class="highlighter-rouge">include</code> option.</p><p>This option is useful for “blacklisting” a transform like <code class="highlighter-rouge">transform-regenerator</code> if you don’t use generators and don’t want to include <code class="highlighter-rouge">regeneratorRuntime</code> (when using <code class="highlighter-rouge">useBuiltIns</code>) or for using another plugin like <a href="https://github.com/MatAtBread/fast-async">fast-async</a> instead of <a href="http://babeljs.io/docs/plugins/transform-async-generator-functions/">Babel’s async-to-gen</a>.</p><h3 id="usebuiltins"><code class="highlighter-rouge">useBuiltIns</code></h3><p><code class="highlighter-rouge">boolean</code>, defaults to <code class="highlighter-rouge">false</code>.</p><p>A way to apply <code class="highlighter-rouge">babel-preset-env</code> for polyfills (via “babel-polyfill”).</p><blockquote><p>NOTE: This does not currently polyfill experimental/stage-x built-ins like the regular “babel-polyfill” does. This will only work with npm &gt;= 3 (which should be used with Babel 6 anyway)</p></blockquote><div class="highlighter-rouge"><pre class="highlight"><code>npm install babel-polyfill --save
</code></pre></div><p>This option enables a new plugin that replaces the statement <code class="highlighter-rouge">import "babel-polyfill"</code> or <code class="highlighter-rouge">require("babel-polyfill")</code> with individual requires for <code class="highlighter-rouge">babel-polyfill</code> based on environment.</p><blockquote><p>NOTE: Only use <code class="highlighter-rouge">require("babel-polyfill");</code> once in your whole app. Multiple imports or requires of <code class="highlighter-rouge">babel-polyfill</code> will throw an error since it can cause global collisions and other issues that are hard to trace. We recommend creating a single entry file that only contains the <code class="highlighter-rouge">require</code> statement.</p></blockquote><p><strong>In</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">import</span> <span class="s2">"babel-polyfill"</span><span class="p">;</span>
</code></pre></div><p><strong>Out (different based on environment)</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">import</span> <span class="s2">"core-js/modules/es7.string.pad-start"</span><span class="p">;</span>
<span class="kr">import</span> <span class="s2">"core-js/modules/es7.string.pad-end"</span><span class="p">;</span>
<span class="kr">import</span> <span class="s2">"core-js/modules/web.timers"</span><span class="p">;</span>
<span class="kr">import</span> <span class="s2">"core-js/modules/web.immediate"</span><span class="p">;</span>
<span class="kr">import</span> <span class="s2">"core-js/modules/web.dom.iterable"</span><span class="p">;</span>
</code></pre></div><p>This will also work for <code class="highlighter-rouge">core-js</code> directly (<code class="highlighter-rouge">import "core-js";</code>)</p><div class="highlighter-rouge"><pre class="highlight"><code>npm install core-js --save
</code></pre></div><hr /><h2 id="examples">Examples</h2><h3 id="export-with-various-targets">Export with various targets</h3><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">export</span> <span class="kr">class</span> <span class="nx">A</span> <span class="p">{}</span>
</code></pre></div><h4 id="target-only-chrome-52">Target only Chrome 52</h4><p><strong>.babelrc</strong></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"chrome"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p><strong>Out</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">class</span> <span class="nx">A</span> <span class="p">{}</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">A</span> <span class="o">=</span> <span class="nx">A</span><span class="p">;</span>
</code></pre></div><h4 id="target-chrome-52-with-webpack-2rollup-and-loose-mode">Target Chrome 52 with webpack 2/rollup and loose mode</h4><p><strong>.babelrc</strong></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"chrome"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"modules"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"loose"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p><strong>Out</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">export</span> <span class="kr">class</span> <span class="nx">A</span> <span class="p">{}</span>
</code></pre></div><h4 id="target-specific-browsers-via-browserslist">Target specific browsers via browserslist</h4><p><strong>.babelrc</strong></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"chrome"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="p">,</span><span class="w">
        </span><span class="nt">"browsers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"last 2 versions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"safari 7"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p><strong>Out</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">export</span> <span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">A</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">_classCallCheck</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">A</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div><h4 id="target-latest-node-via-node-true-or-node-current">Target latest node via <code class="highlighter-rouge">node: true</code> or <code class="highlighter-rouge">node: "current"</code></h4><p><strong>.babelrc</strong></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"node"</span><span class="p">:</span><span class="w"> </span><span class="s2">"current"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p><strong>Out</strong></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">class</span> <span class="nx">A</span> <span class="p">{}</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">A</span> <span class="o">=</span> <span class="nx">A</span><span class="p">;</span>
</code></pre></div><h3 id="show-debug-output">Show debug output</h3><p><strong>.babelrc</strong></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="w"> </span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"safari"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"modules"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"useBuiltIns"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"debug"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p><strong>stdout</strong></p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>Using targets:
<span class="o">{</span>
  <span class="s2">"safari"</span>: 10
<span class="o">}</span>

Modules transform: <span class="nb">false

</span>Using plugins:
  transform-exponentiation-operator <span class="o">{}</span>
  transform-async-to-generator <span class="o">{}</span>

Using polyfills:
  es7.object.values <span class="o">{}</span>
  es7.object.entries <span class="o">{}</span>
  es7.object.get-own-property-descriptors <span class="o">{}</span>
  web.timers <span class="o">{}</span>
  web.immediate <span class="o">{}</span>
  web.dom.iterable <span class="o">{}</span>
</code></pre></div><h3 id="include-and-exclude-specific-pluginsbuilt-ins">Include and exclude specific plugins/built-ins</h3><blockquote><p>always include arrow functions, explicitly exclude generators</p></blockquote><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"browsers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"last 2 versions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"safari &gt;= 7"</span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"include"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"transform-es2015-arrow-functions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es6.map"</span><span class="p">],</span><span class="w">
      </span><span class="nt">"exclude"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"transform-regenerator"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es6.set"</span><span class="p">]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id="caveats">Caveats</h2><p>If you get a <code class="highlighter-rouge">SyntaxError: Unexpected token ...</code> error when using the <a href="https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-object-rest-spread">object-rest-spread</a> transform then make sure the plugin has been updated to, at least, <code class="highlighter-rouge">v6.19.0</code>.</p><h2 id="other-cool-projects">Other Cool Projects</h2><ul><li><a href="https://github.com/christophehurpeau/babel-preset-modern-browsers">babel-preset-modern-browsers</a></li><li>?</li></ul></div><div class="col-md-3"><div class="sidebar"><ul class="nav"></ul></div></div></div><h2 id="community-discussion" class="page-header">Community Discussion</h2><div id="discourse-comments"></div><script type="text/javascript"> DiscourseEmbed = { discourseUrl: 'https://discuss.babeljs.io/', discourseEmbedUrl: 'https://babeljs.io/docs/plugins/preset-env/'}; (function() { var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true; d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d); })(); </script></div><div class="footer text-center"><p><a href="https://github.com/babel/babel">Babel</a> · <a href="https://github.com/babel/babel/blob/master/LICENSE">遵循 MIT 许可协议</a> · <a href="https://github.com/babel/babel/blob/master/CODE_OF_CONDUCT.md">代码规范</a></p><p><a href="http://henryzoo.com/babel.github.io/">查看 Babel 5.x 文档?</a> · 发现文档中的问题，提交到 <a href="https://github.com/docschina/babeljs.io/issues/new">这里</a>.</p><p>特别鸣谢 <a href="https://cloud.tencent.com/">腾讯云</a> · <a href="http://www.bootcss.com/">Bootstrap中文网</a> 提供服务和支持</p><br/><p><a href=" " target="_blank">冀ICP备14002930号</a></p></div><script src='https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js' defer></script> <script src='https://cdn.bootcss.com/lodash.js/4.16.3/lodash.min.js' defer></script> <script src='https://cdn.bootcss.com/bootstrap/3.3.1/js/bootstrap.min.js' defer></script> <script src='https://cdn.bootcss.com/clipboard.js/1.5.13/clipboard.min.js' defer></script> <script src='https://cdn.bootcss.com/docsearch.js/2.4.1/docsearch.min.js' defer></script> <script src='/scripts/search.js' defer></script> <script src='/scripts/clipboard.js' defer></script> <script src='/scripts/open-in-repl.js' defer></script> <script> document.addEventListener('DOMContentLoaded', function() { $("html").removeClass("no-js").addClass("js"); }); </script> <script src="/scripts/docs.js?tloda=2017-11-26T05:44:25+00:00" defer></script></body></html>
